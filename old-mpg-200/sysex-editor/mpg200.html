<html>
  <head>

    <script src="./jquery-2.1.4.min.js"></script>  
    <script src="./mpg200.js"></script>
	<script src="./FileSaver.min.js"></script>
	<script src="./midi.js"></script>
	<script src="./jquery.knob.min.js"></script>
	<!--script src="./Blob.js"></script-->
	<link rel="stylesheet" type="text/css" href="mpg200.css"/>
	<link href="http://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
  </head>
  <body>
    <h1>MPG-200 settings sysex generator</h1>
    <h2>Switches</h2>

    <table>
	  <tr class="headline">
		<th>Function</th><th>CC</th><th class="dialcol">Test</th>
		<th>Function</th><th>CC</th><th class="dialcol">Test</th>
	  </tr>
      <tr>
        <td>DCO-1 Range</td><td><input type="text" pos="0" class="digit"></td>
		<td>
			<input pos-link="0" class="dial127">
		</td>
        <td>DCO-2 Range</td><td><input type="text" pos="4" class="digit"></td>
		<td>
			<input type="text" pos-link="4" class="dial127">
		</td>
	  </tr>
      <tr>
        <td>DCO-1 Waveform</td><td><input type="text" pos="1" class="digit"></td>
		<td>
			<input type="text" pos-link="1" class="dial127">
		</td>
        <td>DCO-2 Waveform</td><td><input type="text" pos="5" class="digit"></td>
		<td>
			<input type="text" pos-link="5" class="dial127">
		</td>
      </tr>
      <tr>
        <td>DCO-1 LFO</td><td><input type="text" pos="2" class="digit"></td>
		<td>
			<input type="text" pos-link="2" class="dial127">
		</td>
        <td>DCO-2 LFO</td><td><input type="text" pos="6" class="digit"></td>
		<td>
			<input type="text" pos-link="6" class="dial127">
		</td>
      </tr>
      <tr>
        <td>DCO-1 ENV</td><td><input type="text" pos="3" class="digit"></td>
		<td>
			<input type="text" pos-link="3" class="dial127">
		</td>
        <td>DCO-2 ENV</td><td><input type="text" pos="7" class="digit"></td>
		<td>
			<input type="text" pos-link="7" class="dial127">
		</td>
      </tr>
      <tr>
        <td>LFO Wave</td><td><input type="text" pos="13" class="digit"></td>
		<td>
			<input type="text" pos-link="13" class="dial127">
		</td>
        <td>DCO-2 Cross Mod</td><td><input type="text" pos="8" class="digit"></td>
		<td>
			<input type="text" pos-link="8" class="dial127">
		</td>
      </tr>
      <tr>
        <td>DCO Envelope polarity</td><td><input type="text" pos="12" class="digit"></td>
		<td>
			<input type="text" pos-link="12" class="dial127">
		</td>
        <td>VCF Envelope polarity</td><td><input type="text" pos="9" class="digit"></td>
		<td>
			<input type="text" pos-link="9" class="dial127">
		</td>
      </tr>
      <tr>
        <td>VCA Mode</td><td><input type="text" pos="10" class="digit"></td>
		<td>
			<input type="text" pos-link="10" class="dial127">
		</td>
        <td>Chorus</td><td><input type="text" pos="11" class="digit"></td>
		<td>
			<input type="text" pos-link="11" class="dial127">
		</td>
      </tr>
      <tr>
        <td>Manual</td><td><input type="text" pos="14" class="digit"></td>
		<td>
			<input type="text" pos-link="14" class="dial127">
		</td>		
        <td>Write</td><td><input type="text" pos="15" class="digit"></td>
		<td>
			<input type="text" pos-link="15" class="dial127">
		</td>		
      </tr>
    </table>
    
    <h2>Potentiometers</h2>
    <table>
	  <tr>
		<th>Function</th><th>CC</th><th class="dialcol">Test</th>
		<th>Function</th><th>CC</th><th class="dialcol">Test</th>
	  </tr>
      <tr>
        <td>Tune</td><td><input type="text" pos="17" class="digit"></td>
		<td>
			<input type="text" pos-link="17" class="dial127">
		</td>		
        <td>Fine tune</td><td><input type="text" pos="16" class="digit"></td>
		<td>
			<input type="text" pos-link="16" class="dial127">
		</td>		
      </tr>
      <tr>
        <td>Source mix</td><td><input type="text" pos="20" class="digit"></td>
		<td>
			<input type="text" pos-link="20" class="dial127">
		</td>		
        <td>HPF</td><td><input type="text" pos="21" class="digit"></td>
		<td>
			<input type="text" pos-link="21" class="dial127">
		</td>		
      </tr>     
      <tr>
        <td>Cutoff Freq</td><td><input type="text" pos="23" class="digit"></td>
		<td>
			<input type="text" pos-link="23" class="dial127">
		</td>		
        <td>Resonance</td><td><input type="text" pos="22" class="digit"></td>
		<td>
			<input type="text" pos-link="22" class="dial127">
		</td>		
      </tr>     
      <tr>
        <td>VCF LFO Mod</td><td><input type="text" pos="25" class="digit"></td>
		<td>
			<input type="text" pos-link="25" class="dial127">
		</td>		
        <td>VCF ENV Mod</td><td><input type="text" pos="24" class="digit"></td>
		<td>
			<input type="text" pos-link="24" class="dial127">
		</td>		
      </tr>
      <tr>
        <td>DCO LFO Mod</td><td><input type="text" pos="19" class="digit"></td>
		<td>
			<input type="text" pos-link="19" class="dial127">
		</td>		
        <td>DCO ENV Mod</td><td><input type="text" pos="18" class="digit"></td>
		<td>
			<input type="text" pos-link="18" class="dial127">
		</td>		
      </tr>
      <tr>
        <td>Pitch Follow</td><td><input type="text" pos="26" class="digit"></td>
		<td>
			<input type="text" pos-link="26" class="dial127">
		</td>		
        <td>VCA Level</td><td><input type="text" pos="27" class="digit"></td>
		<td>
			<input type="text" pos-link="27" class="dial127">
		</td>		
      </tr>
      <tr>
        <td>LFO Delay Time</td><td><input type="text" pos="29" class="digit"></td>
		<td>
			<input type="text" pos-link="29" class="dial127">
		</td>		
        <td>LFO Rate</td><td><input type="text" pos="28" class="digit"></td>
		<td>
			<input type="text" pos-link="28" class="dial127">
		</td>		
      </tr>
      <tr>
        <td>Attack</td><td><input type="text" pos="30" class="digit"></td>
		<td>
			<input type="text" pos-link="30" class="dial127">
		</td>		
        <td>Decay</td><td><input type="text" pos="31" class="digit"></td>
		<td>
			<input type="text" pos-link="31" class="dial127">
		</td>		
      </tr>
      <tr>
        <td>Sustain</td><td><input type="text" pos="32" class="digit"></td>
		<td>
			<input type="text" pos-link="32" class="dial127">
		</td>		
        <td>Release</td><td><input type="text" pos="33" class="digit"></td>
		<td>
			<input type="text" pos-link="33" class="dial127">
		</td>		
      </tr>
    </table>
    
    <h2>Other settings</h2>
	<p>
		<input type="checkbox" pos="34" id="savesettings"><label for="savesettings">Save settings to EE prom after every sysex update</label><br>
		<input type="checkbox" pos="37" id="removemidi"><label for="removemidi">Remove realtime MIDI and MIDI not destined for the JX-3P</label>
	</p>
    <table>
      <tr>
      </tr>
	  
      <tr>
        <td>MIDI Channel</td>
		<td>
			<select pos="35">
				<option value="0" selected>1</option>
				<option value="1">2</option>
				<option value="2">3</option>
				<option value="3">4</option>
				<option value="4">5</option>
				<option value="5">6</option>
				<option value="6">7</option>
				<option value="7">8</option>
				<option value="8">9</option>
				<option value="9">10</option>
				<option value="10">11</option>
				<option value="11">12</option>
				<option value="12">13</option>
				<option value="13">14</option>
				<option value="14">15</option>
				<option value="15">16</option>
			</select>
		</td>			
      </tr>
      <tr>
        <td>MIDI mix mode</td>
		<td>
			<select pos="36">
				<option value="1">Revert to MIDI after PG-200 message</option>
				<option value="2">Switch instantly between MIDI and PG-200</option>
				<option value="0">Block all midi messages</option>
			</select>
		</td>
      </tr>	  
      <tr>
        <td><label for="timeouts">Timeouts before midi</label></td><td><input id="timeouts" type="text" pos="38" class="digit"></td>
      </tr>	  
      <tr>
        <td colspan="2">Number of timeouts after last PG-200 message before switching to midi. Approximately 10ms delay per timeout + another 26ms before midi will be sent<br><br></td>
      </tr>	 
	  <tr>
		<td>Two pole switch boundary</td><td><input type="text" pos="39" class="digit"></td>
	  </tr>
	  <tr>
		<td>Three pole switch boundaries</td><td><input type="text" pos="40" class="digit">, <input type="text" pos="41" class="digit"></td>
	  </tr>
	  <tr>
		<td>Four pole switch boundaries</td><td><input type="text" pos="42" class="digit">, <input type="text" pos="43" class="digit">, <input type="text" pos="44" class="digit"></td>
	  </tr>
      <tr>
        <td colspan="2">Each interval is [0, boundary>, e.g. exclusive of upper boundary value.</td>
      </tr>	 	  
    </table>

    <hr>
    
    <div>
      <h2>File output</h2>
      <p>
	<button onclick="downloadSettings()">Download settings as sysex</button> 
	<button onclick="downloadClearSettings()">Download "clear settings" sysex</button>	
      </p> 
    </div>    
    <div>
      <h2>Midi output</h2>
      <p>
        Output device: <select id="outputDropdown" onchange="setMidiDeviceFromDropdown()"></select>
      </p>
      <p>
	Channel: 
	<select id="midichannel" onchange="setMidiChannelFromDropdown()">
		<option value="0" selected>1</option>
		<option value="1">2</option>
		<option value="2">3</option>
		<option value="3">4</option>
		<option value="4">5</option>
		<option value="5">6</option>
		<option value="6">7</option>
		<option value="7">8</option>
		<option value="8">9</option>
		<option value="9">10</option>
		<option value="10">11</option>
		<option value="11">12</option>
		<option value="12">13</option>
		<option value="13">14</option>
		<option value="14">15</option>
		<option value="15">16</option>
	</select>
      </p>
      <p>
        <button onclick="sendSettingsAsSysex()">Send settings as MIDI sysex</button>
	<button onclick="sendClearSettingsAsSysex()">Send "clear settings" as MIDI sysex</button>
      </p>
    </div>	
  </body>
</html>